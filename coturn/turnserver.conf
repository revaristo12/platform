# ============================================
# Coturn TURN Server Configuration
# ============================================

# Listening port for TURN
listening-port=3478

# TLS listening port
tls-listening-port=5349

# Listening IP address
listening-ip=0.0.0.0

# External IP address (configure with your public IP in production)
# external-ip=YOUR_PUBLIC_IP

# Relay IP address
relay-ip=0.0.0.0

# TURN server realm
realm=meeting.local

# Server name
server-name=meeting-turn

# Authentication
# Use long-term credentials
lt-cred-mech

# User credentials (format: username:password)
# In production, use strong passwords and environment variables
user=meeting:meeting123

# Or use a database for users
# psql-userdb="host=postgres dbname=meeting_db user=meeting_user password=meeting_pass"

# Rate limiting
max-bps=1000000

# Total quota
total-quota=100

# User quota
user-quota=50

# Log file
log-file=/var/log/turnserver.log

# Verbose logging (disable in production)
verbose

# Enable fingerprinting
fingerprint

# Use long-term credentials mechanism
use-auth-secret
static-auth-secret=meeting-secret-key-change-in-production

# Deny private IP ranges (security)
no-multicast-peers
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255

# Allow loopback for development
# Remove in production
no-loopback-peers

# Disable TCP relay
# Uncomment if you only want UDP
# no-tcp-relay

# Enable UDP relay
no-udp

# Mobility with ICE
mobility

# Process management
pidfile=/var/run/turnserver.pid

# Certificate files for TLS (configure in production)
# cert=/etc/coturn/cert.pem
# pkey=/etc/coturn/key.pem

# Disable TLS and DTLS in development
# Remove these in production with proper certificates
no-tls
no-dtls

# CLI access
cli-ip=127.0.0.1
cli-port=5766
cli-password=meeting-cli-password

# Performance tuning
min-port=49152
max-port=49200

# Bandwidth limiting
# bps-capacity=0

# Database for statistics (optional)
# redis-statsdb="ip=redis dbname=2 password= port=6379"
